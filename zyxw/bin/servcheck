#!/usr/bin/env python
#-*- coding:utf-8 -*-

desc = """
Verify the availability of given host/service
"""

import urlparse
import httplib

def check_server(hostname):
    '''
    Check if a host (www.abc.com) is up
    '''
    conn = httplib.HTTPConnection(hostname)
    conn.request('HEAD','')
    s = conn.getresponse().status
    return int(s) < 400
    
def check_availability(service_url):
    '''
    Checks whether the given (service) url is reachable
    '''
    pr = urlparse.urlparse(service_url)
    serverUp = check_server(pr.netloc)
    return serverUp
    

if __name__ == '__main__':

    import argparse
    parser = argparse.ArgumentParser(description=desc)

    parser.add_argument('url', help='VO service address to check.')
                        
